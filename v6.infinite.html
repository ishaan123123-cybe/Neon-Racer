<!DOCTYPE html>
<html>
<head>
  <title>Neon Racer - v6 (Infinite Drive)</title>
  <meta charset="utf-8" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="icon" href="images/neonracericon.png"/>
  <style>
    /* Make body and html fill whole page */
    html, body {
      margin: 0; padding: 0; height: 100%; overflow: hidden;
      background: black;
      font-family: 'Press Start 2P', cursive;
      color: white;
      user-select: none;
    }

    /* Canvas fills entire viewport */
    #canvas {
      display: block;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: black;
      z-index: 0;
    }

    /* Controls panel hidden by default */
    #controls {
      position: fixed;
      top: 20px; right: 20px;
      background: rgba(20, 20, 20, 0.85);
      border-radius: 10px;
      padding: 15px 20px;
      color: white;
      font-size: 10px;
      width: 280px;
      display: none;
      box-shadow: 0 0 15px #f700ff;
      z-index: 10;
    }

    #controls th, #controls td {
      padding: 4px 8px;
    }
    #controls label {
      font-weight: bold;
      text-shadow: 0 0 5px #f700ff;
    }
    #controls select, #controls input[type=range] {
      width: 100%;
      margin-top: 3px;
      margin-bottom: 8px;
      background: #111;
      border: 1px solid #f700ff;
      color: white;
      font-family: 'Press Start 2P', monospace;
      font-size: 9px;
      border-radius: 5px;
    }

    /* Instructions fixed bottom center */
    #instructions {
      position: fixed;
      bottom: 20px;
      width: 100%;
      text-align: center;
      color: #f700ff;
      font-size: 10px;
      text-shadow: 0 0 8px #f700ff;
      z-index: 9;
      user-select: none;
    }

    /* HUD styling */
    #hud {
      position: fixed;
      top: 10px;
      left: 10px;
      color: #f700ff;
      font-size: 11px;
      text-shadow: 0 0 6px #f700ff;
      user-select: none;
      z-index: 10;
    }

    .hud {
      margin-right: 12px;
      font-weight: bold;
    }
    .value {
      font-weight: normal;
      color: #ffffffaa;
    }
  </style>
</head>
<body>

  <canvas id="canvas">Your browser does not support canvas</canvas>

  <div id="hud">
    <span class="hud">Speed: <span id="speed_value" class="value">0</span> mph</span>
    <span class="hud">Time: <span id="current_lap_time_value" class="value">0.0</span></span>
    <span class="hud">Nitro Boosts: <span id="turbo_left_value" class="value">0</span></span>
    <span class="hud">Last Lap: <span id="last_lap_time_value" class="value">0.0</span></span>
    <span class="hud">Fastest Lap: <span id="fast_lap_time_value" class="value">0.0</span></span>
  </div>

  <table id="controls">
    <tr>
      <th><label for="resolution">Resolution :</label></th>
      <td>
        <select id="resolution">
          <option value='fine'>Fine (1280x960)</option>
          <option selected value='high'>High (1024x768)</option>
          <option value='medium'>Medium (640x480)</option>
          <option value='low'>Low (480x360)</option>
        </select>
      </td>
    </tr>
    <tr>
      <th><label for="lanes">Lanes :</label></th>
      <td>
        <select id="lanes">
          <option>1</option>
          <option>2</option>
          <option selected>3</option>
          <option>4</option>
        </select>
      </td>
    </tr>
    <tr>
      <th><label for="roadWidth">Road Width (<span id="currentRoadWidth"></span>) :</label></th>
      <td><input id="roadWidth" type='range' min='500' max='3000'></td>
    </tr>
    <tr>
      <th><label for="cameraHeight">CameraHeight (<span id="currentCameraHeight"></span>) :</label></th>
      <td><input id="cameraHeight" type='range' min='500' max='5000'></td>
    </tr>
    <tr>
      <th><label for="drawDistance">Draw Distance (<span id="currentDrawDistance"></span>) :</label></th>
      <td><input id="drawDistance" type='range' min='100' max='500'></td>
    </tr>
    <tr>
      <th><label for="fieldOfView">Field of View (<span id="currentFieldOfView"></span>) :</label></th>
      <td><input id="fieldOfView" type='range' min='80' max='140'></td>
    </tr>
    <tr>
      <th><label for="fogDensity">Fog Density (<span id="currentFogDensity"></span>) :</label></th>
      <td><input id="fogDensity" type='range' min='0' max='50'></td>
    </tr>
  </table>

  <div id='instructions'>
    Use <b>arrow keys</b> to drive. Double-click for fullscreen. Press CONTROL for NITRO BOOST.  
    Press <b>Ctrl+V</b> to toggle options.
  </div>

  <script>
    // Get DOM Elements
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const controls = document.getElementById('controls');

    // Set full window canvas size
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Options toggle with Ctrl+V
    window.addEventListener('keydown', (e) => {
      if (e.ctrlKey && (e.key === 'v' || e.key === 'V')) {
        e.preventDefault();
        if (controls.style.display === 'block') {
          controls.style.display = 'none';
        } else {
          controls.style.display = 'block';
        }
      }
    });

    // Example game rendering loop to avoid blank canvas
    function gameLoop() {
      // Clear screen
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw some neon glowing text as a placeholder
      ctx.fillStyle = 'black';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.font = "50px 'Press Start 2P'";
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      // Neon glow effect
      ctx.shadowColor = '#f700ff';
      ctx.shadowBlur = 20;
      ctx.fillStyle = '#f700ff';
      ctx.fillText('Neon Racer v6', canvas.width / 2, canvas.height / 2 - 30);

      ctx.shadowColor = '#00fff7';
      ctx.shadowBlur = 15;
      ctx.fillStyle = '#00fff7';
      ctx.fillText('Infinite Drive', canvas.width / 2, canvas.height / 2 + 30);

      // Reset shadowBlur for next frame
      ctx.shadowBlur = 0;

      // Next frame
      requestAnimationFrame(gameLoop);
    }

    // Start the game loop
    gameLoop();

  </script>

</body>
</html>
